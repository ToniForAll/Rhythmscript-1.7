import { endScreen } from "./endScreen.js";

let userData = localStorage.getItem('userData');

// validacion para volver a la pagina de inicio si no inicia sesion

// if (!userData) { window.location.href = 'index.html' };

const level1 = new Audio('/sfx/fabio.mp3');
const level2 = new Audio('/sfx/Terraria Calamity Mod Music - The Tale of a Cruel World - Title Theme.mp3');
const level3 = new Audio('/sfx/Fire Emblem Fates  - Road Taken.mp3');
const level4 = new Audio('/sfx/HyuN - Grin.mp3');
const hit = new Audio('/sfx/soft-hitsoft.mp3');
const hitclam = new Audio('/sfx/drum-hitnormal.wav');

hit.preload = 'auto';
hitclam.preload = 'auto';

const params = new URLSearchParams(window.location.search);
const musica = params.get('var');

switch(musica) {
    case '1':
        level1.load();
        break;
    case '2':
        level2.load();
        break;
    case '3':
        level3.load();
        break;
    case '4':
        level4.load();
        break;
}

function main() {
    
    const audiohit = new Audio('/sfx/soft-hitsoft.mp3');
    const fail = new Audio('/sfx/failsound.ogg');
    const finishsong = new Audio('/sfx/applause.ogg');
    const comboBreak = new Audio('/sfx/combobreak.wav');
    const volumen = localStorage.getItem('volumen');

    const tecla1 = (localStorage.getItem('teclaP1') || 'd').toLowerCase();
    const tecla2 = (localStorage.getItem('teclaP2') || 'f').toLowerCase();
    const tecla3 = (localStorage.getItem('teclaP3') || 'j').toLowerCase();
    const tecla4 = (localStorage.getItem('teclaP4') || 'k').toLowerCase();
    const valorActual = (localStorage.getItem('velocidad') || '1');

    let level;
    fail.volume = volumen;
    finishsong.volume = volumen;
    audiohit.volume = volumen;
    comboBreak.volume = volumen;

    const keys = {
        [tecla1]: { pressed: false, button: "myButton1", sound: [hit] },
        [tecla2]: { pressed: false, button: "myButton2", sound: [hit] },
        [tecla3]: { pressed: false, button: "myButton3", sound: [hit] },
        [tecla4]: { pressed: false, button: "myButton4", sound: [hit] },
        [' ']: { pressed: false, button: "myButton5", sound: [hitclam] }
    };

    document.addEventListener("keydown", function (event) {
        const key = event.key.toLowerCase();
        if (keys[key] && !keys[key].pressed) {
            keys[key].pressed = true;

            keys[key].sound.volume = volumen;
            keys[key].sound.pause();
            keys[key].sound.currentTime = 0;
            keys[key].sound.play();

            document.getElementById(keys[key].button).click();
            const boton = document.getElementById(keys[key].button);
            if((!keys[" "].pressed)){
                boton.style.backgroundColor = '#6054bd';
            }
        }
    });

    document.addEventListener("keyup", function (event) {
        const key = event.key.toLowerCase();
        if (keys[key]) {
            keys[key].pressed = false;
            const boton = document.getElementById(keys[key].button);
            boton.style.backgroundColor = 'transparent';
        }
    });

    function createImageElement(src) {
        const img = document.createElement('img');
        img.classList.add('pointIcon');
        img.src = src;
        return img;
    }

    function changeHeight() {
        document.querySelector('.life').style.height = life + '%';
    }

    function createCircles(musicArray, index, pathBtn, path, pathClass) {
        for (let i = 0; i < musicArray.length; i++) {
            
            
            // Staggered timeout to create circles
            setTimeout(() => {
                console.log(`Creating circle for musicArray[${i}]:`, musicArray[i]);
                indexes[index] = musicArray[i]; // Update the local variable
                
                if (musicArray[i] === 1) {
                    const circle = document.createElement("div");
                    circle.classList.add("circle", pathClass, "circle" + i);
                    circle.style.animation = `Bajarabajo ${valorActual}s linear`;
                    path.appendChild(circle);
                    
                    let circleRemoved = false;
    
                    const timerId = setTimeout(() => {
                        if (!circleRemoved) {
                            const circle2 = document.querySelector(".circle" + i);
                            if (circle2) {
                                const circleRect = circle2.getBoundingClientRect();
                                const buttonRect = pathBtn.getBoundingClientRect();
                    
                                console.log('circleRect:', circleRect);
                                console.log('buttonRect:', buttonRect);
                    
                                // Agregar un margen para la verificación
                                const margin = 5; // Ajusta este valor según sea necesario
                                if (circleRect.bottom + margin < buttonRect.top) {
                                    if (combo >= 20) {
                                        comboBreak.play();
                                    }
                    
                                    combo = 0;
                                    life -= 10;
                                    scorePoints.innerText = life;
                                    changeHeight();
                    
                                    const container = document.getElementById('pointIcon');
                                    const existingElement = container.querySelector(`.pointIcon`);
                                    if (existingElement) {
                                        container.removeChild(existingElement);
                                    }
                                    container.appendChild(img1);
                    
                                    comboNumber.classList.add('great');
                                    comboNumber.innerText = '';
                                    missNotes++;
                                    path.removeChild(circle2);
                                    circleRemoved = true; // Mark as removed
                                }
                            }
                        }
                    }, 1050);
                }
            }, 150 * i); // Adjust this value if needed
        }
    }

    function checkForClick(pathBtn, path, pathClass) {
        setTimeout(() => {
            if (combo > maxcombo) {
                maxcombo = combo;
            }
        }, 100);

        const circles = document.querySelectorAll(`.${pathClass}`);
        const buttonRect = pathBtn.getBoundingClientRect();
        const buttonThreshold = buttonRect.top + (buttonRect.height * 0.75); // 75% del botón
        const buttonTopAmplified = buttonRect.top - (buttonRect.height * 1.1);
        const buttonBottomAmplified = buttonRect.bottom + (buttonRect.height * 1.1);
        let circleRect;
        let circleRemoved = false;

        if (circles.length > 0) {
            circleRect = circles[0].getBoundingClientRect();
        } else {
            return;
        }

        if (circleRect.bottom > buttonRect.top && circleRect.top < buttonRect.bottom && circleRect.right > buttonRect.left && circleRect.left < buttonRect.right) {
            if (circleRect.bottom > buttonThreshold) {
                score += 300;
                combo++;
                perfectNotes++;
                correctNotes++;
                comboNumber.innerText = combo;
                displayPointIcon(img3);
                if (!circleRemoved) {
                    path.removeChild(circles[0]);
                    circleRemoved = true;
                }
            } else if (circleRect.top >= buttonTopAmplified && circleRect.bottom <= buttonBottomAmplified) {
                score += 100;
                greatNotes++;
                correctNotes++;
                combo++;
                comboNumber.classList.add('great');
                comboNumber.innerText = combo;
                displayPointIcon(img2);
                if (!circleRemoved) {
                    path.removeChild(circles[0]);
                    circleRemoved = true;
                }
            }
        } else {
            if (!circleRemoved) {
                life -= 10;
                if (combo >= 20) {
                    comboBreak.play();
                }
                combo = 0;
                comboNumber.classList.add('great');
                comboNumber.innerText = '';
                scorePoints.innerText = life;
                changeHeight();
                displayPointIcon(img1);
                missNotes++;
                path.removeChild(circles[0]);
                circleRemoved = true;
            }
        }
    }

    function displayPointIcon(icon) {
        const container = document.getElementById('pointIcon');
        const existingElement = container.querySelector(`.pointIcon`);
        if (existingElement) {
            container.removeChild(existingElement);
        }
        container.appendChild(icon);
    }

    function countTotalNotes(musicArray) {
        for (let i = 0; i < musicArray.length; i++) {
            if (musicArray[i] === 1 || musicArray[i] === 2) {
                totalNotes += 1;
            }
        }
    }

    //array's que contienen las notas de cada path. Obligatorio: poner 'end' al final de cada array
    let music1 = [];
    let music2 = [];
    let music3 = [];
    let music4 = [];
    let musicExtra = [];

    let mapafila1;
    let mapafila2;
    let mapafila3;
    let mapafila4;
    let mapafila5;

    switch (musica) {
        case '1':
            level = level1;

            mapafila1 = [
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
                0, 0, 0, 0, 0, 0, 1,
                'end'
            ];
            mapafila2 = [
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,
                0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
                0, 1, 0, 0, 0, 0, 1,
                'end'
            ];
            mapafila3 = [
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
                0, 0, 0, 0, 0, 0, 0,
                'end'
            ];
            mapafila4 = [
                0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 1,
                'end'
            ];

            mapafila5 = [
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0,
                'end'
            ];

            level.volume = volumen;
            level.play();
            break;
        case '2':
            level = level2;

            mapafila1 = [
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
                0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0,
                1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0,
                0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1,
                0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,
                1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0,
                0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                'end'
            ];
            mapafila2 = [
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
                0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0,
                0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1,
                0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,
                0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1,
                0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1,
                0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 
                'end'
            ];
            mapafila3 = [
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 
                1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0,
                0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1,
                1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0,
                0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0,  
                'end'
            ];
            mapafila4 = [
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
                0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 
                0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0,
                0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,
                0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1,
                1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0,
                0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0,
                1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 
                'end'
            ];
            mapafila5 = [
                0, 0 ,0,
                'end'
            ];

            level.volume = volumen;
            level.currentTime = 20;
            level.play();
            break;
        case '3':
            level = level3;

            mapafila1 = 
            [
                0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1,
                0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1,
                0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 
                1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                // pronto todo acabara 
                1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0,
                0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1,
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, //aca acaba la primera parte o sea es el segundo 48
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 
                0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 
                0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1,
            'end'
            ];
            mapafila2 = 
            [
                0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
                0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                // me quedo fue malandro esto por cierto es el segundo 30 
                0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,
                0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, //seg 48
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 
                0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1,
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1,
            'end'
            ];
            mapafila3 = 
            [
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 
                1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0,
                0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,
                // la bendita escalera
                0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 
                0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1,
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 
                0, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1,
                0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1,
                
            'end'
            ];
            mapafila4 = 
            [
                0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1,
                0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,
                0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,
                0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,
                0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0,
                0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                // la mardita escalera
                0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 
                0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1,
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 
                0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 
                0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0,
                0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 
            'end'
            ];
            mapafila5 = [
                0, 0 ,0,
                'end'
            ];

            level.volume = volumen;
            level.play();
            break;
        case '4':
            level = level4;

            mapafila1 = [
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 1, 0, 0,
                1, 0, 0, 0, 1, 0, 1, 0, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 1, 1, 0, 0, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                0, 1, 0, 1, 0, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 1, 0, 0, 1, 0, 0, 1,
                1, 0, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 1, 1, 0,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                0, 1, 1, 0, 0, 0, 1, 0, 1, 0,
                0, 1, 0, 1, 1, 0, 0, 1, 0, 0,
                1, 1, 0, 1, 0, 0, 1, 0, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 1, 1, 0,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 1, 1, 0,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                1, 1, 0, 1, 0, 0, 1, 0, 1, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 0, 1, 0,
                0, 0, 1, 1, 0, 0, 0, 0, 0, 1,'end'
            ];
            mapafila2 = [
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                0, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 0, 1, 0, 0, 1, 1, 0, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                0, 1, 0, 1, 0, 0, 1, 0, 1, 1,
                0, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 1, 1, 0, 0, 1, 0, 0, 1,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 0, 1, 1, 0, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 1, 0, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 1, 0, 1, 1, 0, 0, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                1, 0, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 0, 1, 1, 0, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 1, 0, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 1, 0, 1, 1, 0, 0, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                1, 0, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 0, 1, 1, 0, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                0, 1, 1, 0, 0, 1, 1, 0, 1, 0,
                0, 1, 0, 1, 0, 1, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 1, 0, 0, 1, 0, 0, 1, 0,
                1, 0, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 1,
                0, 0, 1, 0, 1, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                0, 1, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 1, 0, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                1, 0, 0, 0, 1, 0, 0, 1, 0, 1,
                0, 1, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 0,
                0, 1, 0, 1, 0, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                0, 1, 0, 1, 1, 0, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 1, 1, 0,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 1, 0, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                1, 0, 0, 0, 1, 0, 0, 1, 0, 1,
                0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 'end'
            ];
            mapafila3 = [
                1, 1, 0, 1, 0, 0, 1, 0, 1, 0,
                0, 1, 1, 0, 0, 0, 1, 0, 1, 0,
                0, 1, 0, 1, 1, 0, 0, 1, 0, 0,
                1, 1, 0, 1, 0, 0, 1, 0, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 1, 1, 0,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 1, 1, 0,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                0, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 0, 1, 0, 0, 1, 1, 0, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                0, 1, 0, 1, 0, 0, 1, 0, 1, 1,
                0, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 1, 1, 0, 0, 1, 0, 0, 1,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 1, 0, 0, 1, 0, 0, 1, 1,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 1,
                0, 0, 1, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 1, 0, 1, 0, 0, 1, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 1, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 1, 0, 1, 0, 0, 0, 1, 0,
                0, 1, 0, 1, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                0, 1, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                1, 0, 0, 1, 0, 0, 1, 0, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 1, 0, 0, 1,
                0, 1, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 1, 0, 0, 1, 0, 1, 0,
                1, 0, 0, 1, 0, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 0, 1, 0, 1, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 'end'
            ];
            mapafila4 = [
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 1, 0, 0,
                1, 0, 0, 0, 1, 0, 1, 0, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 0, 1, 0, 0, 1, 1,
                0, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 1, 1, 0, 0, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                0, 1, 0, 1, 0, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 1, 0, 0, 1, 0, 0, 1,
                1, 0, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 1, 1, 0,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 0, 1, 0, 1, 1, 0, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 0, 1, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                0, 1, 0, 0, 1, 0, 1, 1, 0, 0,
                1, 0, 0, 0, 1, 0, 1, 0, 1, 0,
                0, 1, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 0, 1, 0, 0, 1, 1, 0, 1,
                0, 0, 1, 1, 0, 0, 0, 1, 0, 1,
                0, 1, 0, 1, 0, 1, 1, 0, 0, 1,
                0, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                1, 0, 0, 1, 0, 0, 1, 1, 0, 0,
                1, 1, 0, 1, 0, 0, 0, 0, 1, 0,
                0, 1, 0, 1, 0, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 0, 1, 0, 1, 1, 0,
                1, 0, 1, 1, 0, 0, 1, 0, 0, 1,
                0, 1, 0, 1, 0, 0, 1, 1, 0, 0,
                0, 1, 0, 1, 1, 0, 0, 1, 0, 1,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 1, 0, 0, 1,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                1, 0, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 1, 0, 1, 0, 0, 1, 1, 0,
                0, 1, 0, 1, 0, 0, 1, 0, 1, 0,
                1, 0, 0, 1, 1, 0, 0, 1, 0, 0,
                1, 1, 0, 0, 1, 0, 0, 1, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 0, 1, 0,
                0, 0, 1, 0, 1, 1, 0, 0, 1, 0,
                1, 0, 0, 1, 0, 1, 0, 1, 1, 0,
                0, 1, 0, 0, 1, 1, 0, 0, 1, 0,
                0, 1, 0, 1, 0, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 0, 1, 1, 0, 0, 1,
                1, 0, 1, 0, 0, 1, 0, 1, 0, 0,
                1, 0, 1, 1, 0, 0, 1, 0, 0, 1,
                0, 1, 0, 1, 0, 0, 1, 1, 0, 0,
                1, 0, 1, 0, 0, 1, 0, 1, 1, 0,
                0, 0, 1, 0, 1, 0, 0, 1, 0, 1,
                1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 'end'
            ];
            mapafila5 = [
                0, 0 ,0,
                'end'
            ];

            level.volume = volumen;
            level.play();
            break;
    }

    music1 = mapafila1;
    music2 = mapafila2;
    music3 = mapafila3;
    music4 = mapafila4;
    musicExtra = mapafila5;

    //indices de los path's
    let indexes = {
        index1Value: '',
        index2Value: '',
        index3Value: '',
        index4Value: '',
        index5Value: ''
    };


    const path1 = document.querySelector(".path1");
    const path2 = document.querySelector(".path2");
    const path3 = document.querySelector(".path3");
    const path4 = document.querySelector(".path4");
    const path5 = document.querySelector(".path5");

    const scorePoints = document.getElementById('scorePoints');
    const pointIcon = document.querySelector('.pointIcon');
    const comboNumber = document.querySelector('.combo');

    const img1 = createImageElement('./img/mania-hit0.png');
    const img2 = createImageElement('./img/mania-hit200.png');
    const img3 = createImageElement('./img/mania-hit300g.png');

    const pathBtn1 = document.getElementById("myButton1");
    const pathBtn2 = document.getElementById("myButton2");
    const pathBtn3 = document.getElementById("myButton3");
    const pathBtn4 = document.getElementById("myButton4");
    const pathBtn5 = document.getElementById("myButton5");

    pathBtn1.textContent = tecla1.toUpperCase();
    pathBtn2.textContent = tecla2.toUpperCase();
    pathBtn3.textContent = tecla3.toUpperCase();
    pathBtn4.textContent = tecla4.toUpperCase();

    let maxcombo = 0;
    let combo = 0;
    let score = 0;
    let perfectNotes = 0;
    let greatNotes = 0;
    let missNotes = 0;
    let totalNotes = 0;
    let correctNotes = 0;
    let life = 100;

    countTotalNotes(music1);
    countTotalNotes(music2);
    countTotalNotes(music3);
    countTotalNotes(music4);
    countTotalNotes(musicExtra);

    createCircles(music1, 'index1Value', pathBtn1, path1, "circlePath1");
    createCircles(music2, 'index2Value', pathBtn2, path2, "circlePath2");
    createCircles(music3, 'index3Value', pathBtn3, path3, "circlePath3");
    createCircles(music4, 'index4Value', pathBtn4, path4, "circlePath4");
    createCircles(musicExtra, 'index5Value', pathBtn5, path5, "circlePathExtra");

    pathBtn1.addEventListener('click', () => { checkForClick(pathBtn1, path1, 'circlePath1'); });
    pathBtn2.addEventListener('click', () => { checkForClick(pathBtn2, path2, 'circlePath2'); });
    pathBtn3.addEventListener('click', () => { checkForClick(pathBtn3, path3, 'circlePath3'); });
    pathBtn4.addEventListener('click', () => { checkForClick(pathBtn4, path4, 'circlePath4'); });
    pathBtn5.addEventListener('click', () => { checkForClick(pathBtn5, path5, 'circlePathExtra'); });

    scorePoints.innerText = life;

    setTimeout(() => {
        ////////////// actualizar barra de vida
        
    }, 10);

    function fadeOutAudio(audio, duration) {
        let volume = volumen;
        const interval = 50; 
        const fadeOutInterval = duration / (1000 / interval);
    
        const fadeOut = setInterval(() => {
            if (volume > 0) {
                volume -= 1 / fadeOutInterval;
                audio.volume = Math.max(volume, 0);
            } else {
                clearInterval(fadeOut);
                audio.pause();
                audio.currentTime = 0;
            }
        }, interval);
    }

    const intervalId = setInterval(() => {

        //comprobar que todos los arrays de notas hayan terminado
        if (indexes.index1Value == 'end' && indexes.index2Value == 'end' && indexes.index3Value == 'end' && indexes.index4Value == 'end' && indexes.index5Value == 'end') {
            fadeOutAudio(level, 1000);
            setTimeout(() => {
                level.pause();
                finishsong.play();

                
                // Guarda los resultados en la base de datos, desactivado por ahora.

                // const userId = JSON.parse(userData).userId;
                // const smax = totalNotes * 300;
                // const preresultado = (score / smax) * 1000000;

                // let numeroRedondeado = Math.round(preresultado);
                // let resultado = numeroRedondeado;

                // fetch('/RhythmScript v1.7/script/back.php', {
                //     method: 'POST',
                //     headers: {
                //         'Content-Type': 'application/json'
                //     },
                //     body: JSON.stringify({ "requestNumber": "3", musica, resultado, userId })
                // }).then(response => response.json())
                //     .then(data => {
                //         if (!data.success) {
                //             alert(data.message);
                //         }
                //     }).catch(error => {
                //         if (error.name === 'SyntaxError') {
                //             alert('Error en la respuesta del servidor: ' + error.message);
                //         } else {
                //             alert('Error en la solicitud: ' + error.message);
                //             console.log(error.message);
                //         }
                //     });

                endScreen(score, perfectNotes, greatNotes, missNotes, correctNotes, totalNotes, maxcombo, life);
            }, 3000);
            clearInterval(intervalId);
        }

        ///////////// Terminar partida al perder la vida
        if (life < 100) {
            changeHeight();
            scorePoints.innerText = life;
            life += 10;
        }
        changeHeight();
        scorePoints.innerText = life;

        if (life <= 0) {
            fail.play();
            level.pause();

            // Guarda los resultados en la base de datos, desactivado por ahora.

            // const userId = JSON.parse(userData).userId;
            // const smax = totalNotes * 300;
            // const preresultado = (score / smax) * 1000000;

            // let numeroRedondeado = Math.round(preresultado);
            // let resultado = numeroRedondeado;

            // fetch('/RhythmScript v1.7/script/back.php', {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json'
            //     },
            //     body: JSON.stringify({ "requestNumber": "3", musica, resultado, userId })
            // }).then(response => response.json())
            //     .then(data => {
            //         if (!data.success) {
            //             alert(data.message);
            //         }
            //     }).catch(error => {
            //         if (error.name === 'SyntaxError') {
            //             alert('Error en la respuesta del servidor: ' + error.message);
            //         } else {
            //             alert('Error en la solicitud: ' + error.message);
            //             console.log(error.message);
            //         }
            //     });

            endScreen(score, perfectNotes, greatNotes, missNotes, correctNotes, totalNotes, maxcombo, life);
            clearInterval(intervalId);
        }

    }, 1000)

    setTimeout(() => {
        //funcion para limpiar el nivel despues de x tiempo
        const circles = document.querySelectorAll('.circle');

        if (circles.length > 0) {
            circles.forEach((circle) => {
                path1.removeChild(circle);
            });
        }
    }, 1200000);
}

const body = document.querySelector("body");
const countBg = document.createElement("div");
let counter = 4;
countBg.classList.add("countBg");
countBg.innerHTML = `<h1 class="inicio">${counter}</h1>`;
body.appendChild(countBg);

function count() {
    counter--;
    countBg.innerHTML = `<h1 class="inicio">${counter}</h1>`;

    if (counter === 1) {
        setTimeout(() => {
            countBg.remove();
        }, 1000);
    } else {
        setTimeout(count, 1000);
    }
}
count();

const bodyRemove = document.getElementById('bodyRemove');

function isMobile() {
    return /Mobi|Android/i.test(navigator.userAgent);
}


document.addEventListener('DOMContentLoaded', function() {
    if (isMobile()) {
        const bodyRemove = document.body;
        while (bodyRemove.firstChild) {
            bodyRemove.removeChild(bodyRemove.firstChild);
            bodyRemove.style.backgroundImage = 'none'; 
        }

        

        const nuevoDiv = document.createElement('div');

        nuevoDiv.classList.add('Movil');

        const nuevoElemento1 = document.createElement('h1');
        nuevoElemento1.textContent = '¡Advertencia!';

        const nuevoElemento2 = document.createElement('p');
        nuevoElemento2.textContent = 'Tu dispositivo no es compatible con esta aplicación.';

        nuevoDiv.appendChild(nuevoElemento1);
        nuevoDiv.appendChild(nuevoElemento2);

        bodyRemove.appendChild(nuevoDiv);
    }
});



setTimeout(main, 3000)


